module FREQ:
    input RESET, INT; %Interrupt at 200Hz
    output BPM(integer);
    loop
        var ticks := 0 : integer in 
            weak abort 
                every INT do
                    ticks := ticks + 1
                end
            when RESET do
                emit BPM((60000 / (ticks * 5))) % Calculate BPM
            end abort;
        end
    end loop
end module